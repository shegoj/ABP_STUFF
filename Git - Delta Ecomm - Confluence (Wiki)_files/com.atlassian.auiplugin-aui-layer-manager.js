;try {
/* module-key = 'com.atlassian.auiplugin:aui-layer-manager', location = 'js/layer-manager.js' */
(function(B){function F(L,N){var M=L.length;while(M--){if(N(L[M])){return M}}return -1}function D(L,M){return F(L,function(N){return N[0]===M[0]})}function G(L){return F(L,function(M){return AJS.layer(M).isBlanketed()})}function A(M){var L;if(M.length){var N=M[M.length-1];var O=parseInt(N.css("z-index"),10);L=(isNaN(O)?0:O)+100}else{L=0}return Math.max(3000,L)}function E(L,N){var M=G(L);if(N!==M){if(M>-1){AJS.dim(false,L[M].css("z-index")-20)}else{AJS.undim()}}}function K(L,P,O){if(P<0){return }for(var N=L.length-1;N>=P;N--){var M=L[N];var Q=AJS.layer(M);if(O||!Q.isPersistent()){Q._hideLayer(true);L.splice(N,1)}}}function C(M){var L=I(M);if(L.length>0){return L.closest(".aui-layer")}}function J(L){return I(L).length>0}function I(L){return B('[aria-controls="'+L.attr("id")+'"]')}function H(){this._stack=[]}H.prototype={push:function(N){var M=(N instanceof B)?N:B(N);if(D(this._stack,M)>=0){throw new Error("The given element is already an active layer.")}this.popLayersBeside(M);var L=AJS.layer(M);var O=A(this._stack);L._showLayer(O);if(L.isBlanketed()){AJS.dim(false,O-20)}this._stack.push(M);return this},popLayersBeside:function(O){var M=(O instanceof B)?O:B(O);if(!J(M)){var L=G(this._stack);K(this._stack,++L,false);return }var P=C(M);if(P){var N=this.indexOf(P);K(this._stack,++N,false)}else{K(this._stack,0,false)}},indexOf:function(L){return D(this._stack,B(L))},item:function(L){return this._stack[L]},hideAll:function(){this._stack.reverse().forEach(function(M){var L=AJS.layer(M);if(L.isBlanketed()||L.isPersistent()){return }L.hide()});return this},getNextLowerNonPersistentOrBlanketedLayer:function(P){var O=(P instanceof B)?P:B(P);var M=D(this._stack,O);if(M<0){return null}var L;M--;while(M>=0){L=this._stack[M];var N=AJS.layer(L);if(!N.isPersistent()||N.isBlanketed()){return L}M--}return null},getNextHigherNonPeristentAndNonBlanketedLayer:function(P){var O=(P instanceof B)?P:B(P);var M=D(this._stack,O);if(M<0){return null}var L;M++;while(M<this._stack.length){L=this._stack[M];var N=AJS.layer(L);if(!(N.isPersistent()||N.isBlanketed())){return L}M++}return null},popUntil:function(O){var N=(O instanceof B)?O:B(O);var M=D(this._stack,N);if(M===-1){return null}var L=G(this._stack);K(this._stack,M+1,AJS.layer(N).isBlanketed());AJS.layer(N)._hideLayer();this._stack.splice(M,1);E(this._stack,L);return N},getTopLayer:function(){if(!this._stack.length){return null}var L=this._stack[this._stack.length-1];return L},popTopIfNonPersistent:function(){var L=this.getTopLayer();var M=AJS.layer(L);if(!L||M.isPersistent()){return null}return this.popUntil(L)},popUntilTopBlanketed:function(){var P=G(this._stack);if(P<0){return null}var M=this._stack[P];var O=AJS.layer(M);if(O.isPersistent()){var L=this.getNextHigherNonPeristentAndNonBlanketedLayer(M);if(L){var N=D(this._stack,L);K(this._stack,N,true);return L}return null}K(this._stack,P,true);E(this._stack,P);return M},popUntilTopPersistent:function(){var N=AJS.LayerManager.global.getTopLayer();if(!N){return }var L;var M=G(this._stack);var O=AJS.layer(N);if(O.isPersistent()){if(O.isBlanketed()){return }else{N=AJS.LayerManager.global.getNextLowerNonPersistentOrBlanketedLayer(N);O=AJS.layer(N);if(N&&!O.isPersistent()){L=D(this._stack,N);K(this._stack,L,true);E(this._stack,M)}else{return }}}else{L=D(this._stack,N);K(this._stack,L,true);E(this._stack,M)}}};AJS.LayerManager=H}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-layer-manager', location = 'js/layer-manager-global.js' */
(function(C){var F=C(document);function D(){F.on("keydown",function(G){if(G.keyCode===AJS.keyCode.ESCAPE){AJS.LayerManager.global.popUntilTopPersistent();G.preventDefault()}})}function E(){F.on("click",".aui-blanket",function(G){if(AJS.LayerManager.global.popUntilTopBlanketed()){G.preventDefault()}})}function B(){F.on("click",function(K){var H=C(K.target);if(H.closest(".aui-blanket").length){return }var G=H.closest("[aria-controls]");var J=H.closest(".aui-layer");if(!J.length&&!A(G)){AJS.LayerManager.global.hideAll();return }if(A(G)){return }if(J.length){var I=AJS.LayerManager.global.getNextHigherNonPeristentAndNonBlanketedLayer(J);if(I){AJS.layer(I).hide()}}})}function A(G){if(!G.length){return false}var H=document.getElementById(G.attr("aria-controls"));return AJS.LayerManager.global.indexOf(H)>-1}D();E();B();AJS.LayerManager.global=new AJS.LayerManager()}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
